# Theory Autoencoder

åŸºäºå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„æ‰æ ¹ç†è®ºè‡ªåŠ¨åŒ–åˆ†æå·¥å…·ã€‚æœ¬é¡¹ç›®é€šè¿‡å¤šé˜¶æ®µçš„ç¼–ç æµç¨‹ï¼Œå®ç°å¯¹æ–‡æœ¬æ•°æ®çš„ç³»ç»Ÿæ€§è´¨æ€§åˆ†æã€‚


```
theory-autoencoder/
â”œâ”€â”€ prompts/                    # æç¤ºè¯æ¨¡æ¿
â”‚   â”œâ”€â”€ 01-information_extraction.txt
â”‚   â”œâ”€â”€ 02-open_coding.md
â”‚   â”œâ”€â”€ 03-axial_coding.md
â”‚   â”œâ”€â”€ 04-selective_coding.txt
â”‚   â””â”€â”€ 05-data_saturation_test.txt
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ generate_input_texts/   # æ•°æ®å‡†å¤‡è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ open_coding.py
â”‚   â”‚   â””â”€â”€ axial_coding.py
â”‚   â”œâ”€â”€ invoke/                 # LLM è°ƒç”¨è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ open_coding.py
â”‚   â”‚   â””â”€â”€ axial_coding.py
â”‚   â””â”€â”€ analyst/                # ç»“æœåˆ†æè„šæœ¬
â”‚       â”œâ”€â”€ open_coding.py
â”‚       â””â”€â”€ axial_coding.py
â”œâ”€â”€ src/
â”‚   â””â”€â”€ agent/                  # æ ¸å¿ƒä»£ç†ç±»
â”‚       â”œâ”€â”€ __init__.py         # BaseAgent åŸºç±»
â”‚       â””â”€â”€ coding.py           # CodingAgent å®ç°
â”œâ”€â”€ data/                       # æ•°æ®ç›®å½•
â”‚   â”œâ”€â”€ raw/                    # åŸå§‹æ•°æ®
â”‚   â”œâ”€â”€ input_texts/            # ç”Ÿæˆçš„è¾“å…¥æ–‡æœ¬
â”‚   â”œâ”€â”€ agents/                 # ä»£ç†é…ç½®
â”‚   â””â”€â”€ tasks/                  # ä»»åŠ¡æ•°æ®
â”œâ”€â”€ logs/                       # æ—¥å¿—æ–‡ä»¶
â””â”€â”€ pyproject.toml             # é¡¹ç›®é…ç½®
```

## ğŸ”„ å·¥ä½œæµç¨‹

### 1. æç¤ºè¯å‡†å¤‡ï¼ˆPromptsï¼‰

é¡¹ç›®é¢„å®šä¹‰äº†ä¸‰ä¸ªä¸»è¦ç¼–ç é˜¶æ®µçš„æç¤ºè¯ï¼š

- **å¼€æ”¾å¼ç¼–ç **ï¼ˆ02-open_coding.mdï¼‰ï¼šè¯†åˆ«æ–‡æœ¬ä¸­çš„åˆå§‹æ¦‚å¿µå’Œæ ‡ç­¾
- **è½´å¿ƒç¼–ç **ï¼ˆ03-axial_coding.mdï¼‰ï¼šå°†åˆå§‹å­ç±»åˆ«èšåˆæˆä¸»è¦ç±»åˆ«
- **TODO: é€‰æ‹©æ€§ç¼–ç **ï¼ˆ04-selective_coding.txtï¼‰ï¼šè¯†åˆ«æ ¸å¿ƒç±»åˆ«å¹¶è§£é‡Šå…¶å…³ç³»
- **TODO: æ•°æ®é¥±å’Œåº¦æµ‹è¯•**ï¼ˆ05-data_saturation_test.txtï¼‰ï¼šè¯„ä¼°ç†è®ºé¥±å’Œåº¦

### 2. æ•°æ®å‡†å¤‡ï¼ˆGenerate Input Textsï¼‰

ä½¿ç”¨ `scripts/generate_input_texts/` ä¸­çš„è„šæœ¬å°†åŸå§‹æ•°æ®è½¬æ¢ä¸º LLM å¯å¤„ç†çš„è¾“å…¥æ ¼å¼ã€‚

**ç¤ºä¾‹ï¼šå¼€æ”¾ç¼–ç æ•°æ®å‡†å¤‡**

```bash
uv run scripts/generate_input_texts/open_coding.py
```

è¯¥è„šæœ¬ä¼šï¼š
- è¯»å– `prompts/02-open_coding.md` æ¨¡æ¿
- ä» `data/raw/` ç›®å½•åŠ è½½åŸå§‹ JSON æ•°æ®
- å°†æ•°æ®å¡«å……åˆ°æç¤ºè¯æ¨¡æ¿ä¸­
- ç”Ÿæˆå®Œæ•´çš„è¾“å…¥æ–‡æœ¬åˆ—è¡¨å¹¶ä¿å­˜åˆ° `data/input_texts/open_coding.json`

### 3. LLM è°ƒç”¨ï¼ˆInvokeï¼‰

ä½¿ç”¨ `scripts/invoke/` ä¸­çš„è„šæœ¬è°ƒç”¨ LLM æ‰§è¡Œç¼–ç ä»»åŠ¡ã€‚

**ç¤ºä¾‹ï¼šæ‰§è¡Œå¼€æ”¾ç¼–ç **

```bash
uv run python scripts/invoke/open_coding.py
```

è¯¥è„šæœ¬ä¼šï¼š
- åŠ è½½ç”Ÿæˆçš„è¾“å…¥æ–‡æœ¬
- åˆ›å»º OpenCodingAgent å®ä¾‹
- ä¸ºæ¯ä¸ªè¾“å…¥æ–‡æœ¬åˆ›å»ºä»»åŠ¡
- å¼‚æ­¥å¹¶å‘æ‰§è¡Œä»»åŠ¡ï¼ˆé»˜è®¤æœ€å¤§å¹¶å‘ 20ï¼‰
- ä¿å­˜ä»»åŠ¡çŠ¶æ€å’Œç»“æœåˆ°ç£ç›˜
- ç”Ÿæˆæ‰§è¡Œæ—¥å¿—


### 4. ç»“æœåˆ†æï¼ˆAnalystï¼‰

ä½¿ç”¨ `scripts/analyst/` ä¸­çš„è„šæœ¬å¯¹ç¼–ç ç»“æœè¿›è¡Œæ·±å…¥åˆ†æã€‚

**ç¤ºä¾‹ï¼šåˆ†æå¼€æ”¾å¼ç¼–ç ç»“æœ**

```bash
uv run scripts/analyst/open_coding.py
```

æˆ–ä½¿ç”¨ Jupyter Notebook è¿›è¡Œäº¤äº’å¼åˆ†æï¼š

```bash
scripts/analyst/open-coding.ipynb
```

åˆ†æè„šæœ¬å¯ä»¥ï¼š
- æå–å’Œèšåˆç¼–ç æ ‡ç­¾
- è¿›è¡Œèšç±»åˆ†æï¼ˆä½¿ç”¨ HDBSCANï¼‰
- å¯è§†åŒ–ç¼–ç ç»“æœåˆ†å¸ƒ
- ç”Ÿæˆç»Ÿè®¡æŠ¥å‘Š

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.12+
- OpenAI API Key

### å®‰è£…ä¾èµ–

```bash
uv sync
```

### é…ç½®ç¯å¢ƒå˜é‡

åˆ›å»º `.env` æ–‡ä»¶å¹¶æ·»åŠ ï¼š

```bash
OPENAI_API_KEY=your_api_key_here
OPENAI_BASE_URL=your_api_base_url
```

### è¿è¡Œç¤ºä¾‹

1. **å‡†å¤‡æ•°æ®**

```bash
# å°†åŸå§‹æ•°æ®æ”¾ç½®åœ¨ data/raw/ ç›®å½•
# ç¡®ä¿æ•°æ®æ ¼å¼ç¬¦åˆè„šæœ¬è¦æ±‚
uv run scripts/generate_input_texts/open_coding.py
```

2. **æ‰§è¡Œç¼–ç **

```bash
uv run scripts/invoke/open_coding.py
```

3. **åˆ†æç»“æœ**

```bash
uv run scripts/analyst/open_coding.py
```

## ğŸ§© æ ¸å¿ƒæ¶æ„

### BaseAgent åŸºç±»

`src/agent/__init__.py` ä¸­çš„ `BaseAgent` æ˜¯æ‰€æœ‰ç¼–ç ä»£ç†çš„åŸºç±»ï¼Œæä¾›ï¼š

- **ä»»åŠ¡ç®¡ç†**ï¼šåˆ›å»ºã€åŠ è½½ã€ä¿å­˜ä»»åŠ¡
- **å¹¶å‘æ‰§è¡Œ**ï¼šå¼‚æ­¥ä»»åŠ¡è°ƒåº¦å’Œæ‰§è¡Œ
- **çŠ¶æ€æŒä¹…åŒ–**ï¼šAgent é…ç½®å’Œä»»åŠ¡çŠ¶æ€ä¿å­˜åˆ°ç£ç›˜
- **æ—¥å¿—è®°å½•**ï¼šè¯¦ç»†çš„æ‰§è¡Œæ—¥å¿—
- **é”™è¯¯å¤„ç†**ï¼šå¼‚å¸¸æ•è·å’Œå¤±è´¥é‡è¯•æœºåˆ¶

### ä¸“ç”¨ä»£ç†

- **OpenCodingAgent**ï¼šæ‰§è¡Œå¼€æ”¾å¼ç¼–ç ä»»åŠ¡
- **CodingAgent**ï¼šé€šç”¨ç¼–ç ä»£ç†
- **AxialCodingAgent**ï¼šæ‰§è¡Œè½´å¿ƒç¼–ç ä»»åŠ¡ï¼ˆå¯æ‰©å±•ï¼‰

### æ•°æ®æ¨¡å‹

ä½¿ç”¨ Pydantic å®šä¹‰çš„æ•°æ®æ¨¡å‹ï¼š

- `AgentConfig`ï¼šä»£ç†é…ç½®
- `TaskSchema`ï¼šä»»åŠ¡æ•°æ®ç»“æ„
- `TasksCreatedResult`ï¼šä»»åŠ¡åˆ›å»ºç»“æœ
- `TasksRunningResult`ï¼šä»»åŠ¡æ‰§è¡Œç»“æœ


## ğŸ”§ é«˜çº§åŠŸèƒ½

### ä»»åŠ¡æ¢å¤

å¦‚æœä»»åŠ¡æ‰§è¡Œä¸­æ–­ï¼Œå¯ä»¥ä½¿ç”¨ç›¸åŒçš„ Agent ID æ¢å¤ï¼š

```python
agent = OpenCodingAgent(agent_id='your-agent-id')
asyncio.run(agent.run_tasks())
```

### è‡ªå®šä¹‰å¹¶å‘æ§åˆ¶

```python
await agent.run_tasks(
    max_concurrent_requests=10,  # æœ€å¤§å¹¶å‘è¯·æ±‚æ•°
    request_gap=0.5              # è¯·æ±‚é—´éš”ï¼ˆç§’ï¼‰
)
```

### æ—¥å¿—æŸ¥çœ‹

æ—¥å¿—æ–‡ä»¶ä¿å­˜åœ¨ `logs/` ç›®å½•ï¼Œä»¥ Agent ID å‘½åï¼š

```bash
tail -f logs/<agent-id>.log
``